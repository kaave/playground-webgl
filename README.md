# Playground WebGL

## 環境構築

- Syntax highlightが有効化
- lint
- 自動整形

を満たす環境を構築する。

### macOS

- `brew install glslang clang-format`

### VScode

- Shader languages support for VS Code
- GLSL Lint
    - `glsllint.glslangValidatorPath` を設定する必要がある
- Clang-Format
    - `[glsl]` に対して `"editor.formatOnSave": true` を設定する

---

## メモ

https://wgld.org/d/webgl/

### 座標変換

WebGLは三次元空間のシミュレーションだけど、結局出力先はディスプレイなので二次元にする必要がある。そらそうやね。  
これを **座標変換** という

#### 座標変換その1: モデル変換

被写体となる物体が3次元空間のどの位置にあるのかを定義するための座標変換。  
原点からみてどこにあるのかを知るために必要

#### 座標変換その2: ビュー変換

視線(カメラと例えられてる)の位置と向きの定義。  
明後日の方向を向いていると、ものは映らない。とうぜん。

#### 座標変換その3: プロジェクション変換

三次元空間のどの領域を撮影するかの定義。  
width height 距離とかなんとか

#### どうやんの

> WebGLのプログラム側でモデル・ビュー・プロジェクションのそれぞれの行列を生成して掛け合わせておき、  
> 最終的に出来上がった座標変換行列を頂点シェーダに渡すのが一般的

とのこと

### シェーダー

固定機能パイプラインが存在しないため座標変換はすべて自前でやらないかん

→こういう自前でやる仕組みのことをプログラマブルシェーダー(WebGLの場合、GLSL)と呼ぶ

シェーダーには2種類あり、WebGLではこれら2つを用意せんといかん

- `.vert`: 頂点シェーダー(バーテックスシェーダー)
    - ポリゴンの頂点情報を扱う
    - 先に呼ばれるのはこっち
    - 頂点に関するすべての情報を渡すことができるけど位置情報だけは必須
- `.frag`: フラグメントシェーダー(ピクセルシェーダー)
    - 描画される際のピクセル情報(色)を扱う

### 行列

行と列の要素数が一致している行列のことを正方行列と呼び、4x4の行列を用いるのが3Dレンダリングのキホン

モデル座標変換・ビュー座標変換・プロジェクション座標変換それぞれに行列を用いる

### 書き出せるもの

- 点
- 線
- 三角形(ポリゴン)
    - 当然、3つの点がいる
    - 結ぶ順番が重要で、というのも見えない部分を描画しない仕組み*カリング*にて結ぶ順序を使っているとのこと

### 代表的データ型

- `int`: おなじみ
- `float`: おなじみ
- `bool`: おなじみ
- `vec*`: ベクトル `*` は2~4の値をとり、その値分の要素数を持つベクトルとなる 中の値はぜんぶfloat
- `mat*`: 正方行列 同じく2~4までの値をとる 中の値はぜんぶfloat
